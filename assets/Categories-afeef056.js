import{_ as ue,y as de,g as n,z as ve,h as W,f as pe,A as _e,C as fe,r,o as w,c as J,a as s,d as e,w as l,i as c,q as D,M as ge,l as L,F as me,J as be,j as q,m as k,t as ye,k as P,B as $,p as qe,e as he,P as Ce,Q as we,R as ke,S as Ve}from"./index-21ef78fb.js";import{B as Ae}from"./ButtonAdd-adf1e21d.js";const N=V=>(qe("data-v-05e40d8f"),V=V(),he(),V),Ie={class:"q-py-md table-container"},Se={class:"row"},xe=N(()=>s("h6",{class:"title q-my-lg"},"CATEGORIAS",-1)),Oe={class:"container-content"},ze={class:"container-table q-mt-md q-pa-md",rounded:""},Re={class:"accions-td"},De={class:"accions-td"},Ne=N(()=>s("i",{class:"icon icon-check"},null,-1)),Be={class:"modal-categories"},Ee={class:"q-my-md text-center"},Me={class:"row q-px-xl"},Te={class:"col-12"},Ue=N(()=>s("span",{class:"text-required q-pb-sm"},[k("Todos los campos con "),s("span",{class:"text-red"},"*"),k(" son obligatorios")],-1)),Fe={class:"row justify-center"},Ge={key:0,class:"spinner"},je={__name:"Categories",setup(V){const h=de(),I=n(""),u=n(!1),S=n(!0),m=n([]),C=n([]),B=n(),f=n(!1),H=ve(),E=W(()=>!d.value||!v.value?!0:f.value==!0),K=[a=>!!a||"Este campo es requerido"];let p=n(""),d=n(""),v=n(""),x=n(""),O=n(""),g=n("active");const X=pe(),M=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"center",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),Y=a=>{d.value=a},Z=a=>{v.value=a},ee=()=>{I.value="REGISTRAR CATEGORIAS",x.value="",O.value="",S.value=!0,h.toggleModal(),d.value="",v.value=""},ae=a=>{I.value="EDITAR CATEGORIAS",S.value=!1,B.value=a._id,x.value=a.name,O.value=a.description,d.value=a.name,v.value=a.description,h.toggleModal()},_=(a,o)=>{X.notify({type:a,message:o,position:"top"})},b=async()=>{m.value=[],C.value=[],u.value=!0;try{const{category:a}=await be(y.value);let o=1,A=1;a.forEach(i=>{i.status=i.status?"Inactivo":"Activo",i.status=="Activo"?(i.id=o++,m.value.push(i)):(i.id=A++,C.value.push(i)),i.description=i.description.trim()==""?"No registra":i.description}),u.value=!1}catch{u.value=!1,_("negative","Ocurrió un error")}};async function te(){f.value=!0;try{const a=await Ce({name:d.value,description:v.value},y.value);f.value=!1,_("positive","Categorias registrada correctamente"),h.toggleModal(),m.value=[],b()}catch{f.value=!1,_("negative","Ocurrió un error")}}async function oe(){f.value=!0;try{const a=await we({id:B.value,name:d.value,description:v.value},y.value);f.value=!1,_("positive","Categoria actualizada correctamente"),h.toggleModal(),m.value=[],b()}catch{f.value=!1,_("negative","Ocurrió un error")}d.value="",v.value=""}async function le(a){u.value=!0;try{const o=await ke(a,y.value);_("positive","Categoria activada correctamente"),u.value=!1,m.value=[],C.value=[],b()}catch{u.value=!1,_("negative","Ocurrió un error")}}async function se(a){u.value=!0;try{const o=await Ve(a,y.value);_("positive","Categoria desactivada correctamente"),u.value=!1,m.value=[],C.value=[],b()}catch{u.value=!1,_("negative","Ocurrió un error")}}const y=W(()=>H.idSelected);return _e(y,()=>{b()}),fe(()=>{b()}),(a,o)=>{const A=r("q-separator"),i=r("q-tab"),ne=r("q-tabs"),T=r("q-icon"),U=r("q-input"),z=r("q-tooltip"),R=r("q-btn"),F=r("q-btn-group"),G=r("q-table"),j=r("q-tab-panel"),ie=r("q-tab-panels"),re=r("q-card"),ce=r("q-spinner-ios");return w(),J(me,null,[s("div",Ie,[s("div",Se,[s("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=t=>a.$router.back())}),xe]),e(A,{class:"separator"}),s("div",Oe,[e(Ae,{onOnClick:ee,label:"Crear nueva categoria"}),s("div",ze,[e(re,null,{default:l(()=>[e(ne,{modelValue:c(g),"onUpdate:modelValue":o[1]||(o[1]=t=>q(g)?g.value=t:g=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(i,{name:"active",label:"Activos"}),e(i,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),e(A),e(ie,{modelValue:c(g),"onUpdate:modelValue":o[4]||(o[4]=t=>q(g)?g.value=t:g=t),animated:""},{default:l(()=>[e(j,{name:"active"},{default:l(()=>[e(G,{flat:"",bordered:"",title:"Categorias","row-key":"name",rows:m.value,columns:M.value,filter:c(p),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(U,{borderless:"",dense:"",debounce:"300",modelValue:c(p),"onUpdate:modelValue":o[2]||(o[2]=t=>q(p)?p.value=t:p=t),placeholder:"Search"},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(t=>[s("td",Re,[e(F,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(R,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:Q=>ae(t.row)},{default:l(()=>[e(z,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[k(" Editar ")]),_:1})]),_:2},1032,["onClick"]),e(R,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:Q=>se(t.row._id)},{default:l(()=>[e(z,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[k(" Desactivar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),e(j,{name:"inactive"},{default:l(()=>[e(G,{flat:"",bordered:"",title:"Categorias","row-key":"name",rows:C.value,columns:M.value,filter:c(p),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(U,{borderless:"",dense:"",debounce:"300",modelValue:c(p),"onUpdate:modelValue":o[3]||(o[3]=t=>q(p)?p.value=t:p=t),placeholder:"Search"},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(t=>[s("td",De,[e(F,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(R,{"text-color":"blue-10",class:"col q-pa-none",onClick:Q=>le(t.row._id)},{default:l(()=>[Ne,e(z,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[k(" Activar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),c(h).modalIsOpen?(w(),D(ge,{key:0,class:"modal"},{default:l(()=>[s("div",Be,[s("h6",Ee,ye(I.value),1),s("div",Me,[s("div",Te,[e(P,{label:"Nombre",required:!0,type:"text",ruless:K,value:c(x),modelValue:c(d),"onUpdate:modelValue":o[5]||(o[5]=t=>q(d)?d.value=t:d=t),onOnWrite:Y},null,8,["value","modelValue"]),e(P,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:c(O),modelValue:c(v),"onUpdate:modelValue":o[6]||(o[6]=t=>q(v)?v.value=t:v=t),onOnWrite:Z},null,8,["value","modelValue"]),Ue,s("div",Fe,[S.value?(w(),D($,{key:0,disable:c(E),onOnClick:te},null,8,["disable"])):(w(),D($,{key:1,disable:c(E),onOnClick:oe},null,8,["disable"]))]),f.value?(w(),J("div",Ge,[e(ce,{color:"primary",size:"2.5em"})])):L("",!0)])])])]),_:1})):L("",!0)],64)}}},Je=ue(je,[["__scopeId","data-v-05e40d8f"]]);export{Je as default};
