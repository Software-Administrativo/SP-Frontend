import{_ as L,g as p,m as I,u as R,f as B,ao as O,r as y,o as h,c as N,a as s,d as m,w as b,h as T,i as V,j as A,R as x,A as q,p as D,e as $,am as K}from"./index-751a0b5d.js";import{c as U}from"./index-a145c50b.js";const r=v=>(D("data-v-360d749e"),v=v(),$(),v),j={class:"row background-sugar"},z={class:"col-md-6 col-12 window-height bg-white q-pa-md"},W=r(()=>s("div",{class:"row"},[s("img",{class:"image-size",src:K,alt:"Logo trapiche"})],-1)),G={class:"form-container column justify-center items-center"},H={class:"form column"},M=r(()=>s("h3",{class:"q-mb-md"},"Recupera tu contraseña",-1)),Q=r(()=>s("h5",{class:"text-grey q-mt-xs q-mb-md"},"Ingresa tu nueva contraseña",-1)),F=r(()=>s("span",null,[q("Contraseña "),s("label",{class:"text-red"},"*")],-1)),J=r(()=>s("span",null,[q("Confirmar contraseña "),s("label",{class:"text-red"},"*")],-1)),X={key:2,class:"spinner"},Y=r(()=>s("div",{class:"col-md-6 col-0 window-height"},null,-1)),Z={__name:"NewPassword",props:{error:{type:Boolean,required:!1,default:!1}},setup(v){const a=p(!0),P=I(),_=R(),o=p(""),l=p("");let f=null;const w=p(!0),k=()=>{o.value!=l.value?w.value=!1:w.value=!0},S=B(()=>o.value===""||l.value===""||o.value!=l.value);O(()=>{f=_.currentRoute.value.params.token,(f==null||f=="")&&_.replace("/")});const g=p(!1),i=(c,e)=>{P.notify({type:c,message:e,position:"top"})};async function C(){var c,e,u;g.value=!0;try{const t=await U({token:f,password:o.value});g.value=!1;let n=(u=(e=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:e.errors[0])==null?void 0:u.msg;n==x.TOKENINVALID?(i("negative","Este enlace ya vencio, el tiempo de duración es de 10 minutos"),setTimeout(()=>{_.push({name:"sign-in"})},2e3)):n==x.LENGTHPASSWORD?i("negative","La contraseña debe tener de 6 a 20 carácteres"):n==x.RULESPASSWORD?i("negative","La contraseña debe tener una letra mayúscula, una letra minúscula y un número"):(i("positive","Contraseña cambiada con exito"),setTimeout(()=>{_.push({name:"sign-in"})},2e3))}catch{g.value=!1,i("negative","Ocurrió un error, por favor verifique los datos")}}return(c,e)=>{const u=y("q-icon"),t=y("q-input"),n=y("q-btn"),E=y("q-spinner-ios");return h(),N("section",j,[s("div",z,[W,s("div",G,[s("div",H,[M,Q,F,m(t,{dense:"",filled:"",type:a.value?"password":"text","error-message":"Las contraseñas no coinciden",error:!w.value,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value=d),onKeyup:k},{append:b(()=>[m(u,{name:a.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=d=>a.value=!a.value)},null,8,["name"])]),_:1},8,["type","error","modelValue"]),J,m(t,{dense:"",filled:"",type:a.value?"password":"text","error-message":"Las contraseñas no coinciden",error:!w.value,modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=d=>l.value=d),onKeyup:k},{append:b(()=>[m(u,{name:a.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=d=>a.value=!a.value)},null,8,["name"])]),_:1},8,["type","error","modelValue"]),T(S)?(h(),V(n,{key:0,disable:"",class:"btn-login text-white full-width q-mt-none"},{default:b(()=>[q("Enviar")]),_:1})):(h(),V(n,{key:1,onClick:C,class:"btn-login text-white full-width q-mt-none"},{default:b(()=>[q("Enviar")]),_:1})),g.value?(h(),N("div",X,[m(E,{color:"primary",size:"2.5em"})])):A("",!0)])])]),Y])}}},ae=L(Z,[["__scopeId","data-v-360d749e"]]);export{ae as default};
