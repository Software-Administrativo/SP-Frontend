import{g as L,b as U}from"./index-0c799de6.js";import{_ as j,f as G,a5 as H,g as n,z as Q,h as J,A as K,C as W,r,o as S,c as X,a as e,d as s,w as l,i as d,q as D,M as Y,l as A,F as Z,j as ee,m as u,t as p,p as te,e as oe}from"./index-f354315f.js";const _=b=>(te("data-v-6837123a"),b=b(),oe(),b),ae={class:"q-py-md table-container"},se={class:"row"},le=_(()=>e("h6",{class:"title q-my-lg"},"PENDIENTES DE PAGO",-1)),ne={class:"container-content"},re={class:"container-table q-mt-md q-pa-md",rounded:""},de={class:"accions-td"},ce={class:"modalSystem"},ie={class:"q-my-md text-center"},ue={class:"row q-px-xl"},_e={class:"column col-12",style:{"font-size":"16px"}},fe={class:"q-pb-sm"},pe=_(()=>e("span",{class:"text-bold"},"Cliente:",-1)),he={class:"q-pb-sm"},be=_(()=>e("span",{class:"text-bold"},"Estado de la orden:",-1)),ge={class:"q-pb-sm"},ve=_(()=>e("span",{class:"text-bold"},"Estado del pago:",-1)),me={class:"q-pb-sm"},ye=_(()=>e("span",{class:"text-bold"},"Fecha de entrega:",-1)),we={class:"q-pb-sm"},qe=_(()=>e("span",{class:"text-bold"},"Valor total:",-1)),Se={class:"q-pb-sm column"},xe=_(()=>e("span",{class:"text-bold"},"Detalle del pedido:",-1)),Ee={class:"column"},ke={__name:"Pays",setup(b){const O=G(),x=H(),E=n(""),c=n(!1),g=n([]),k=n([]),m=n([]),V=Q();let f=n(""),h=n("");const I=n([{name:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-weight: bold;",style:"width: 10px"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"unitvalue",label:"Valor unitario",field:"unitvalue",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"quantity",label:"Cantidad",field:"quantity",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"cost",label:"Total",field:"cost",align:"left",sortable:!0,headerStyle:"font-weight: bold;"}]),P=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"client",label:"Cliente",field:"client",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"statusorder",label:"Estado de orden",field:"statusorder",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"dateorder",label:"Fecha entrega",field:"dateorder",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),T=o=>{m.value=[];let a=1;E.value="DETALLE DE LA ORDEN",f.value=o,o.models.forEach(v=>{v.id=a++,m.value.push(v)}),x.toggleSHowDetailsModal()},y=(o,a)=>{O.notify({type:o,message:a,position:"top"})};async function w(){g.value=[],k.value=[],c.value=!0;try{const{orders:o}=await L(q.value);c.value=!1;let a=1;o&&o.forEach(t=>{t.status=t.status?"Inactivo":"Activo",t.statuspay=="PENDIENTE"&&(t.id=a++,g.value.push(t)),t.client=t.client.name,t.dateorder=t.dateorder.slice(0,t.dateorder.indexOf("T"))})}catch{c.value=!1,y("negative","Ocurrió un error al obtener las ordenes")}}async function F(o){c.value=!0;try{await U(o,q.value),y("positive","Pedido pagado correctamente"),c.value=!1,g.value=[],k.value=[],w()}catch{c.value=!1,y("negative","Ocurrió un error al verificar el pago")}}const q=J(()=>V.idSelected);return K(q,()=>{w()}),W(()=>{w()}),(o,a)=>{const t=r("q-separator"),v=r("q-icon"),M=r("q-input"),N=r("q-tooltip"),z=r("q-btn"),B=r("q-btn-group"),C=r("q-table"),R=r("q-card");return S(),X(Z,null,[e("div",ae,[e("div",se,[e("i",{class:"icon icon-backRoute q-pt-lg",onClick:a[0]||(a[0]=i=>o.$router.back())}),le]),s(t,{class:"separator"}),e("div",ne,[e("div",re,[s(R,null,{default:l(()=>[s(t),s(C,{flat:"",bordered:"",title:"Pedidos","row-key":"id",rows:g.value,columns:P.value,filter:d(h),loading:c.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[s(M,{borderless:"",dense:"",debounce:"300",modelValue:d(h),"onUpdate:modelValue":a[1]||(a[1]=i=>ee(h)?h.value=i:h=i),placeholder:"Buscar"},{append:l(()=>[s(v,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(i=>[e("td",de,[s(B,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[s(z,{icon:"visibility","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>T(i.row)},{default:l(()=>[s(N,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[u(" Ver detalles ")]),_:1})]),_:2},1032,["onClick"]),i.row.statuspay=="PENDIENTE"?(S(),D(z,{key:0,icon:"payment","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>F(i.row._id)},{default:l(()=>[s(N,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[u(" Marcar como pago ")]),_:1})]),_:2},1032,["onClick"])):A("",!0)]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})])])]),d(x).modalShowIsOpen?(S(),D(Y,{key:0,class:"modal",showDetail:!0},{default:l(()=>[e("div",ce,[e("h6",ie,p(E.value),1),e("div",ue,[e("div",_e,[e("div",fe,[pe,u(" "+p(d(f).client),1)]),e("div",he,[be,u(" "+p(d(f).statusorder),1)]),e("div",ge,[ve,u(" "+p(d(f).statuspay),1)]),e("div",me,[ye,u(" "+p(d(f).dateorder),1)]),e("div",we,[qe,u(" "+p(d(f).total),1)]),e("div",Se,[xe,e("div",Ee,[s(C,{flat:"",bordered:"",style:{"max-width":"300px"},"row-key":"codigo",rows:m.value,columns:I.value,"rows-per-page-options":[5,10,20]},null,8,["rows","columns"])])])])])])]),_:1})):A("",!0)],64)}}},Ce=j(ke,[["__scopeId","data-v-6837123a"]]);export{Ce as default};
