import{_ as de,f as pe,y as ve,g as n,z as _e,h as W,A as fe,C as me,r as c,o as w,c as $,a as s,d as e,w as l,i as r,q as z,M as ge,l as L,F as be,E as ye,j as q,m as T,t as qe,k as Q,B as Y,p as he,e as Se,Y as we,Z as Te,$ as ke,a0 as Ve}from"./index-21ef78fb.js";import{B as xe}from"./ButtonAdd-adf1e21d.js";const M=k=>(he("data-v-9e598225"),k=k(),Se(),k),Ae={class:"q-py-md table-container"},Ie={class:"row"},Oe=M(()=>s("h6",{class:"title q-my-lg"},"TIPOS DE GASTO",-1)),Ce={class:"container-content"},De={class:"container-table q-mt-md q-pa-md",rounded:""},ze={class:"accions-td"},Me={class:"accions-td"},Ee=M(()=>s("i",{class:"icon icon-check"},null,-1)),Ne={class:"modal-spents"},Be={class:"q-my-md text-center"},Re={class:"row q-px-xl"},Ge={class:"col-12"},Ue=M(()=>s("span",{class:"text-required q-pb-sm"},[T("Todos los campos con "),s("span",{class:"text-red"},"*"),T(" son obligatorios")],-1)),Fe={class:"row justify-center"},Pe={key:0,class:"spinner"},je={__name:"TypeSpents",setup(k){const Z=pe(),h=ve(),x=n(""),u=n(!1),A=n(!0),g=n([]),S=n([]),E=n(),H=_e(),f=n(!1),N=W(()=>d.value==""?!0:f.value==!0),J=[t=>!!t||"Este campo es requerido"];let p=n(""),m=n("active"),d=n(""),v=n(""),I=n(""),O=n("");const B=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"center",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),K=t=>{d.value=t},X=t=>{v.value=t},ee=()=>{x.value="REGISTRAR TIPO DE GASTO",te(),A.value=!0,h.toggleModal()},te=()=>{O.value="",I.value="",d.value="",v.value=""},ae=t=>{x.value="EDITAR TIPO DE GASTO",A.value=!1,E.value=t._id,O.value=t.description,I.value=t.name,d.value=t.name,v.value=t.description,h.toggleModal()},_=(t,o)=>{Z.notify({type:t,message:o,position:"top"})},b=async()=>{g.value=[],S.value=[],u.value=!0;try{const{spents:t}=await ye(y.value);let o=1,V=1;t.forEach(i=>{i.status=i.status?"Inactivo":"Activo",i.status=="Activo"?(i.id=o++,g.value.push(i)):(i.id=V++,S.value.push(i)),i.description=i.description.trim()==""?"No registra":i.description}),u.value=!1}catch{u.value=!1,_("negative","Ocurrió un error")}};async function oe(){f.value=!0;try{const t=await we({name:d.value,description:v.value},y.value);f.value=!1,_("positive","Tipo de gasto registrado correctamente"),h.toggleModal(),g.value=[],b()}catch{f.value=!1,_("negative","Ocurrió un error, por favor verifique los datos")}}async function le(){f.value=!0;try{const t=await Te({id:E.value,name:d.value,description:v.value},y.value);f.value=!1,_("positive","Tipo de gasto actualizado correctamente"),h.toggleModal(),g.value=[],b()}catch{f.value=!1,_("negative","Ocurrió un error, por favor verifique los datos")}d.value="",v.value=""}async function se(t){u.value=!0;try{const o=await ke(t,y.value);_("positive","Tipo de gasto activado correctamente"),u.value=!1,g.value=[],S.value=[],b()}catch{u.value=!1,_("negative","Ocurrió un error")}}async function ne(t){u.value=!1;try{const o=await Ve(t,y.value);u.value=!1,_("positive","Tipo de gasto desactivado correctamente"),g.value=[],S.value=[],b()}catch{u.value=!1,_("negative","Ocurrió un error")}}const y=W(()=>H.idSelected);return fe(y,()=>{b()}),me(()=>{b()}),(t,o)=>{const V=c("q-separator"),i=c("q-tab"),ie=c("q-tabs"),R=c("q-icon"),G=c("q-input"),C=c("q-tooltip"),D=c("q-btn"),U=c("q-btn-group"),F=c("q-table"),P=c("q-tab-panel"),ce=c("q-tab-panels"),re=c("q-card"),ue=c("q-spinner-ios");return w(),$(be,null,[s("div",Ae,[s("div",Ie,[s("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=a=>t.$router.back())}),Oe]),e(V,{class:"separator"}),s("div",Ce,[e(xe,{onOnClick:ee,label:"Crear tipo de gasto"}),s("div",De,[e(re,null,{default:l(()=>[e(ie,{modelValue:r(m),"onUpdate:modelValue":o[1]||(o[1]=a=>q(m)?m.value=a:m=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(i,{name:"active",label:"Activos"}),e(i,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),e(V),e(ce,{modelValue:r(m),"onUpdate:modelValue":o[4]||(o[4]=a=>q(m)?m.value=a:m=a),animated:""},{default:l(()=>[e(P,{name:"active"},{default:l(()=>[e(F,{flat:"",bordered:"",title:"Gastos","row-key":"name",rows:g.value,columns:B.value,filter:r(p),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(G,{borderless:"",dense:"",debounce:"300",modelValue:r(p),"onUpdate:modelValue":o[2]||(o[2]=a=>q(p)?p.value=a:p=a),placeholder:"Search"},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(a=>[s("td",ze,[e(U,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(D,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:j=>ae(a.row)},{default:l(()=>[e(C,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[T(" Editar ")]),_:1})]),_:2},1032,["onClick"]),e(D,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:j=>ne(a.row._id)},{default:l(()=>[e(C,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[T(" Desactivar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),e(P,{name:"inactive"},{default:l(()=>[e(F,{flat:"",bordered:"",title:"Gastos","row-key":"name",rows:S.value,columns:B.value,filter:r(p),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(G,{borderless:"",dense:"",debounce:"300",modelValue:r(p),"onUpdate:modelValue":o[3]||(o[3]=a=>q(p)?p.value=a:p=a),placeholder:"Search"},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(a=>[s("td",Me,[e(U,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(D,{"text-color":"blue-10",class:"col q-pa-none",onClick:j=>se(a.row._id)},{default:l(()=>[Ee,e(C,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[T(" Activar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(h).modalIsOpen?(w(),z(ge,{key:0,class:"modal"},{default:l(()=>[s("div",Ne,[s("h6",Be,qe(x.value),1),s("div",Re,[s("div",Ge,[e(Q,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:J,value:r(I),modelValue:r(d),"onUpdate:modelValue":o[5]||(o[5]=a=>q(d)?d.value=a:d=a),onOnWrite:K},null,8,["value","modelValue"]),e(Q,{label:"Descripción",type:"text",required:!1,value:r(O),modelValue:r(v),"onUpdate:modelValue":o[6]||(o[6]=a=>q(v)?v.value=a:v=a),onOnWrite:X},null,8,["value","modelValue"]),Ue,s("div",Fe,[A.value?(w(),z(Y,{key:0,disable:r(N),onOnClick:oe},null,8,["disable"])):(w(),z(Y,{key:1,disable:r(N),onOnClick:le},null,8,["disable"]))]),f.value?(w(),$("div",Pe,[e(ue,{color:"primary",size:"2.5em"})])):L("",!0)])])])]),_:1})):L("",!0)],64)}}},Le=de(je,[["__scopeId","data-v-9e598225"]]);export{Le as default};
