import{g as F}from"./index-101c95f7.js";import{_ as T,f as B,af as H,g as a,z as M,h as L,A as $,C as P,r as c,o as E,c as j,a as e,d as l,w as f,i as n,q as G,M as Q,l as U,F as J,j as K,t as i,m as p,p as W,e as X}from"./index-21ef78fb.js";const r=h=>(W("data-v-fcb55a1b"),h=h(),X(),h),Y={class:"q-py-md table-container"},Z={class:"row"},ee=r(()=>e("h6",{class:"title q-my-lg"},"HISTORIAL DE PEDIDOS",-1)),te={class:"container-content"},oe={class:"container-table q-mt-md q-pa-md",rounded:""},se={class:"accions-td"},ae={class:"modalSystem"},le={class:"q-my-md text-center"},ne={class:"row q-px-xl"},re={class:"column col-12",style:{"font-size":"16px"}},de={class:"q-pb-sm"},ce=r(()=>e("span",{class:"text-bold"},"Cliente:",-1)),ie={class:"q-pb-sm"},ue=r(()=>e("span",{class:"text-bold"},"Estado de la orden:",-1)),_e={class:"q-pb-sm"},fe=r(()=>e("span",{class:"text-bold"},"Estado del pago:",-1)),pe={class:"q-pb-sm"},he=r(()=>e("span",{class:"text-bold"},"Fecha de entrega:",-1)),be={class:"q-pb-sm"},me=r(()=>e("span",{class:"text-bold"},"Valor total:",-1)),ge={class:"q-pb-sm column"},ve=r(()=>e("span",{class:"text-bold"},"Detalle del pedido:",-1)),we={class:"column"},ye={__name:"History",setup(h){const z=B(),v=H(),w=a(""),b=a(!1),g=a([]),A=a([]),y=a([]),D=M();let d=a(""),u=a("");const k=a([{name:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-weight: bold;",style:"width: 10px"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"unitvalue",label:"Valor unitario",field:"unitvalue",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"quantity",label:"Cantidad",field:"quantity",align:"left",sortable:!0,headerStyle:"font-weight: bold;"},{name:"cost",label:"Total",field:"cost",align:"left",sortable:!0,headerStyle:"font-weight: bold;"}]),C=a([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"client",label:"Cliente",field:"client",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"statusorder",label:"Estado de orden",field:"statusorder",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"dateorder",label:"Fecha entrega",field:"dateorder",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),O=s=>{let o=1;w.value="DETALLE DE LA ORDEN",d.value=s,s.models.forEach(m=>{m.id=o++,y.value.push(m)}),v.toggleSHowDetailsModal()},V=(s,o)=>{z.notify({type:s,message:o,position:"top"})};async function q(){g.value=[],A.value=[],b.value=!0;try{const{orders:s}=await F(S.value);b.value=!1;let o=1;s&&s.forEach(t=>{t.status=t.status?"Inactivo":"Activo",t.statusorder=="ENTREGADO"&&(t.id=o++,g.value.push(t)),t.client=t.client.name,t.dateorder=t.dateorder.slice(0,t.dateorder.indexOf("T"))})}catch{b.value=!1,V("negative","OcurriÃ³ un error al obtener las ordenes")}}const S=L(()=>D.idSelected);return $(S,()=>{q()}),P(()=>{q()}),(s,o)=>{const t=c("q-separator"),m=c("q-icon"),I=c("q-input"),N=c("q-btn"),R=c("q-btn-group"),x=c("q-table");return E(),j(J,null,[e("div",Y,[e("div",Z,[e("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=_=>s.$router.back())}),ee]),l(t,{class:"separator"}),e("div",te,[e("div",oe,[l(t),l(x,{flat:"",bordered:"",title:"Pedidos","row-key":"id",rows:g.value,columns:C.value,filter:n(u),loading:b.value,"rows-per-page-options":[5,10,20]},{"top-right":f(()=>[l(I,{borderless:"",dense:"",debounce:"300",modelValue:n(u),"onUpdate:modelValue":o[1]||(o[1]=_=>K(u)?u.value=_:u=_),placeholder:"Buscar"},{append:f(()=>[l(m,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":f(_=>[e("td",se,[l(R,{class:"full-width full-height",outline:"",square:""},{default:f(()=>[l(N,{icon:"visibility","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:qe=>O(_.row)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])])])]),n(v).modalShowIsOpen?(E(),G(Q,{key:0,class:"modal",showDetail:!0},{default:f(()=>[e("div",ae,[e("h6",le,i(w.value),1),e("div",ne,[e("div",re,[e("div",de,[ce,p(" "+i(n(d).client),1)]),e("div",ie,[ue,p(" "+i(n(d).statusorder),1)]),e("div",_e,[fe,p(" "+i(n(d).statuspay),1)]),e("div",pe,[he,p(" "+i(n(d).dateorder),1)]),e("div",be,[me,p(" "+i(n(d).total),1)]),e("div",ge,[ve,e("div",we,[l(x,{flat:"",bordered:"",style:{"max-width":"300px"},"row-key":"codigo",rows:y.value,columns:k.value,"rows-per-page-options":[5,10,20]},null,8,["rows","columns"])])])])])])]),_:1})):U("",!0)],64)}}},Ee=T(ye,[["__scopeId","data-v-fcb55a1b"]]);export{Ee as default};
