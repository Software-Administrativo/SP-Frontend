import{_ as _e,y as fe,g as n,z as ge,h as $,f as me,A as be,C as ye,r as u,o as V,c as P,a as s,d as t,w as l,i as r,q as U,M as qe,l as X,F as he,G as we,H as F,j as y,m as C,t as Be,k as Y,E as ke,B as Z,p as Ve,e as Ce,I as Se,J as Ae,K as xe,L as Ie}from"./index-f354315f.js";import{B as Me}from"./ButtonAdd-9b531d6c.js";const T=S=>(Ve("data-v-ea163435"),S=S(),Ce(),S),ze={class:"q-py-md table-container"},Oe={class:"row"},De=T(()=>s("h6",{class:"title q-my-lg"},"MARCAS",-1)),Ee={class:"container-content"},Ne={class:"container-table q-mt-md q-pa-md",rounded:""},Re={class:"accions-td"},Ue={class:"accions-td"},Fe=T(()=>s("i",{class:"icon icon-check"},null,-1)),Te={class:"modal-brands"},je={class:"q-my-md text-center"},Ge={class:"row q-px-xl"},Le={class:"col-12"},We=T(()=>s("span",{class:"text-required q-pb-sm"},[C("Todos los campos con "),s("span",{class:"text-red"},"*"),C(" son obligatorios")],-1)),He={class:"row justify-center"},Je={key:0,class:"spinner"},Ke={__name:"Brands",setup(S){const w=fe(),I=n(""),p=n(!1),M=n(!0),q=n(!1),b=n([]),B=n([]),j=n(),ee=ge(),G=$(()=>!d.value||!v.value?!0:q.value==!0),z=[a=>!!a||"Este campo es requerido"];let _=n(""),d=n(""),c=n(""),v=n(""),O=n(""),D=n(""),E=n(""),m=n("active");const ae=me(),L=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"category",label:"Categoria",field:"category",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"center",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),te=a=>{d.value=a},oe=a=>{c.value=a},le=a=>{v.value=a},ne=()=>{I.value="REGISTRAR MARCAS",O.value="",D.value="",E.value="",M.value=!0,w.toggleModal(),d.value="",c.value="",v.value=""},se=a=>{I.value="EDITAR MARCAS",M.value=!1,j.value=a._id,O.value=a.name,D.value=a.category,E.value=a.description,d.value=a.name,c.value=a.category,v.value=a.description,w.toggleModal()},f=(a,e)=>{ae.notify({type:a,message:e,position:"top"})},h=async()=>{b.value=[],B.value=[],p.value=!0;try{const{mark:a}=await we(g.value),{category:e}=await F(g.value);let A=1,x=1;a.forEach(i=>{i.status=i.status?"Inactivo":"Activo",e.forEach(k=>{i.category==k._id&&(i.category=k.name)}),i.status=="Activo"?(i.id=A++,b.value.push(i)):(i.id=x++,B.value.push(i)),i.description=i.description.trim()==""?"No registra":i.description}),p.value=!1}catch{f("negative","Ocurrió un error")}};async function re(){q.value=!0;const{category:a}=await F(g.value);a.forEach(e=>{e.name==c.value&&(c.value=e._id)});try{await Se({name:d.value,category:c.value,description:v.value},g.value),q.value=!1,w.toggleModal(),f("positive","Marca registrada correctamente"),b.value=[],h()}catch{f("negative","Ocurrió un error")}}async function ce(){q.value=!0;const{category:a}=await F(g.value);a.forEach(e=>{e.name==c.value&&(c.value=e._id)});try{await Ae({id:j.value,name:d.value,category:c.value,description:v.value},g.value),q.value=!1,f("positive","Marca actualizada correctamente"),w.toggleModal(),b.value=[],h()}catch{f("negative","Ocurrió un error")}d.value="",v.value="",c.value=""}async function ie(a){p.value=!0;try{const e=await xe(a,g.value);p.value=!1,f("positive","Marca activada correctamente"),b.value=[],B.value=[],h()}catch{p.value=!1,f("negative","Ocurrió un error")}}async function ue(a){p.value=!0;try{const e=await Ie(a,g.value);p.value=!1,f("positive","Marca desactivada correctamente"),b.value=[],B.value=[],h()}catch{p.value=!1,f("negative","Ocurrió un error")}}const g=$(()=>ee.idSelected);return be(g,()=>{h()}),ye(()=>{h()}),(a,e)=>{const A=u("q-separator"),x=u("q-tab"),i=u("q-tabs"),k=u("q-icon"),W=u("q-input"),N=u("q-tooltip"),R=u("q-btn"),H=u("q-btn-group"),J=u("q-table"),K=u("q-tab-panel"),de=u("q-tab-panels"),ve=u("q-card"),pe=u("q-spinner-ios");return V(),P(he,null,[s("div",ze,[s("div",Oe,[s("i",{class:"icon icon-backRoute q-pt-lg",onClick:e[0]||(e[0]=o=>a.$router.back())}),De]),t(A,{class:"separator"}),s("div",Ee,[t(Me,{onOnClick:ne,label:"Crear nueva marca"}),s("div",Ne,[t(ve,null,{default:l(()=>[t(i,{modelValue:r(m),"onUpdate:modelValue":e[1]||(e[1]=o=>y(m)?m.value=o:m=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[t(x,{name:"active",label:"Activos"}),t(x,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(A),t(de,{modelValue:r(m),"onUpdate:modelValue":e[4]||(e[4]=o=>y(m)?m.value=o:m=o),animated:""},{default:l(()=>[t(K,{name:"active"},{default:l(()=>[t(J,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:b.value,columns:L.value,filter:r(_),loading:p.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(W,{borderless:"",dense:"",debounce:"300",modelValue:r(_),"onUpdate:modelValue":e[2]||(e[2]=o=>y(_)?_.value=o:_=o),placeholder:"Search"},{append:l(()=>[t(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(o=>[s("td",Re,[t(H,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(R,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:Q=>se(o.row)},{default:l(()=>[t(N,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[C(" Editar ")]),_:1})]),_:2},1032,["onClick"]),t(R,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:Q=>ue(o.row._id)},{default:l(()=>[t(N,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[C(" Desactivar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(K,{name:"inactive"},{default:l(()=>[t(J,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:B.value,columns:L.value,filter:r(_),loading:p.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(W,{borderless:"",dense:"",debounce:"300",modelValue:r(_),"onUpdate:modelValue":e[3]||(e[3]=o=>y(_)?_.value=o:_=o),placeholder:"Search"},{append:l(()=>[t(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(o=>[s("td",Ue,[t(H,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(R,{"text-color":"blue-10",class:"col q-pa-none",onClick:Q=>ie(o.row._id)},{default:l(()=>[Fe,t(N,{class:"bg-indigo",offset:[10,10]},{default:l(()=>[C(" Activar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(w).modalIsOpen?(V(),U(qe,{key:0,class:"modal"},{default:l(()=>[s("div",Te,[s("h6",je,Be(I.value),1),s("div",Ge,[s("div",Le,[t(Y,{label:"Nombre",required:!0,type:"text",ruless:z,value:r(O),modelValue:r(d),"onUpdate:modelValue":e[5]||(e[5]=o=>y(d)?d.value=o:d=o),onOnWrite:te},null,8,["value","modelValue"]),t(ke,{class:"q-pb-lg",label:"Categoria",required:!0,type:"category",ruless:z,value:r(D),modelValue:r(c),"onUpdate:modelValue":e[6]||(e[6]=o=>y(c)?c.value=o:c=o),onOnSelect:oe},null,8,["value","modelValue"]),t(Y,{class:"q-mb-xs",label:"Descripción",type:"text",required:!0,ruless:z,value:r(E),modelValue:r(v),"onUpdate:modelValue":e[7]||(e[7]=o=>y(v)?v.value=o:v=o),onOnWrite:le},null,8,["value","modelValue"]),We,s("div",He,[M.value?(V(),U(Z,{key:0,disable:r(G),onOnClick:re},null,8,["disable"])):(V(),U(Z,{key:1,disable:r(G),onOnClick:ce},null,8,["disable"]))]),q.value?(V(),P("div",Je,[t(pe,{color:"primary",size:"2.5em"})])):X("",!0)])])])]),_:1})):X("",!0)],64)}}},Pe=_e(Ke,[["__scopeId","data-v-ea163435"]]);export{Pe as default};
